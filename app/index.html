<!DOCTYPE html>
<html ng-app="MindDrop">
  <head>
  	<meta charset="utf-8">
    <title>MindDrop</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body ng-controller="MainCtrl">
    <input style="display:none;" id="fileDialog" type="file" file-input="upload()"/>
    <input style="display:none;" id="folderDialog" type="file" nwdirectory file-input="upload()"/>
    <img style="width:100px;height:100px;" src="icon/icon.png" ng-click="fuck()">
    <section></section>

    <progress-arc
      size="100"
      stroke="rgba(0,0,0,0.4)"
      stroke-width="50"
      complete="complete"
      counter-clockwise="false"
      background="rgba(0,0,0,0)">
    </progress-arc>
    <!-- <div class="mask"></div> -->

    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/angular-material.min.js"></script>
    <script type="text/javascript" src="js/angular-animate.min.js"></script>
    <script type="text/javascript" src="js/angular-aria.min.js"></script>
    <script type="text/javascript" src="js/ng-file-upload.min.js"></script>
    <script type="text/javascript" src="js/angular-progress-arc.min.js"></script>

    <script type="text/javascript" src="js/personal/window.drag.js"></script>
    <script type="text/javascript" src="js/personal/window.contextmenu.js"></script>
    <script type="text/javascript" src="js/personal/window.ui.js"></script>
    <script type="text/javascript" src="js/personal/window.drop.js"></script>
    <script type="text/javascript" src="js/personal/window.db.js"></script>
    <script type="text/javascript" src="js/personal/minddrop.core.js"></script>

    <!-- Socket -->
    <script type="text/javascript" src="js/socket/socket.io-1.3.5.js"></script>
    <script type="text/javascript" src="js/socket/socket.min.js"></script>


    <script type="text/javascript" src="js/personal/windht.RTC.broadcast.js"></script>
    <script type="text/javascript">
	  window.gui = require('nw.gui');
		window.win = gui.Window.get();	
    gui.Screen.Init();
    win.showDevTools();
    window.screen=gui.Screen.screens[0];
    gui.App.addOriginAccessWhitelistEntry("app://minddrop/app/auth/index.html", "", "", true)
    gui.App.addOriginAccessWhitelistEntry("app://minddrop/app/about.html", "", "", true)
		gui.App.addOriginAccessWhitelistEntry("app://minddrop/app/crop.html", "", "", true)
		var hackModules=['windht.RTC.broadcast','window.drag','window.contextmenu','window.drop','minddrop.core','window.ui','window.db'];
		var coreModules=['ngMaterial'];
		var thirdPartyModules=['ngFileUpload','angular-progress-arc','btford.socket-io'];
		var concatModules=hackModules.concat(thirdPartyModules,coreModules);
		global.angular = angular;
		angular.module('MindDrop',concatModules)
		.controller('MainCtrl',function($scope){
      $scope.complete=0;
      $scope.upload=function(){

      }

      $scope.$on('upload:progress:update',function(ev,data){
        $scope.complete=data.complete;
      })
      $scope.$on('upload:complete',function(ev,data){
        $scope.complete=0;
      })
    })
    .factory('socket',function(socketFactory){
      return socketFactory({
        // ioSocket:io.connect('http://106.185.45.236:8888')
        ioSocket:io.connect('http://drop.buildmind.org')
      })
    })
    .run(function(socket){

      socket.on('connect',function(){
        socket.id=io.managers[Object.keys(io.managers)[0]].engine.id;
        window.socket_id=socket.id;
      })
    })
	</script>
  </body>

  
</html>
